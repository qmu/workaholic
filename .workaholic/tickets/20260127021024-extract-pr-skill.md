---
created_at: 2026-01-27T02:10:24+09:00
author: a@qmu.jp
type: refactoring
layer: [Config]
effort:
commit_hash:
category:
---

# Extract PR operations skill from pr-creator agent

## Overview

Extract the PR creation/update logic from pr-creator agent into a dedicated skill with bash script. The agent will preload this skill for GitHub PR operations.

## Key Files

- `plugins/core/agents/pr-creator.md` - Simplify to preload skill
- `plugins/core/skills/pr-ops/SKILL.md` - New skill definition (create)
- `plugins/core/skills/pr-ops/scripts/create-or-update.sh` - Bash script for PR operations (create)

## Implementation Steps

1. Create `plugins/core/skills/pr-ops/SKILL.md` with instructions for using the PR script
2. Create `plugins/core/skills/pr-ops/scripts/create-or-update.sh` that:
   - Takes branch name and title as arguments
   - Prepares PR body file by stripping frontmatter from story
   - Checks if PR exists: `gh pr list --head <branch> --json number,url --jq '.[0]'`
   - Creates new PR or updates existing one
   - Outputs "PR created: <URL>" or "PR updated: <URL>"
3. Update `plugins/core/agents/pr-creator.md`:
   - Add `skills: [pr-ops]` to frontmatter
   - Simplify to: read story, derive title, call script
   - Remove detailed bash instructions (now in script)

## Considerations

- Script handles all gh CLI operations
- Agent handles title derivation (requires reading story, LLM decision)
- Single script covers both create and update paths
- Output format must match expected format for report command
